(function(t){function e(e){for(var s,r,o=e[0],c=e[1],l=e[2],h=0,d=[];h<o.length;h++)r=o[h],Object.prototype.hasOwnProperty.call(n,r)&&n[r]&&d.push(n[r][0]),n[r]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(t[s]=c[s]);u&&u(e);while(d.length)d.shift()();return a.push.apply(a,l||[]),i()}function i(){for(var t,e=0;e<a.length;e++){for(var i=a[e],s=!0,o=1;o<i.length;o++){var c=i[o];0!==n[c]&&(s=!1)}s&&(a.splice(e--,1),t=r(r.s=i[0]))}return t}var s={},n={app:0},a=[];function r(e){if(s[e])return s[e].exports;var i=s[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=t,r.c=s,r.d=function(t,e,i){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)r.d(i,s,function(e){return t[e]}.bind(null,s));return i},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/ImageSplitter-QR-Generator/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var u=c;a.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"56d1":function(t,e,i){},"56d7":function(t,e,i){"use strict";i.r(e);i("e260"),i("e6cf"),i("cca6"),i("a79d");for(var s=i("2b0e"),n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("div",{staticClass:"container"},[i("p",[t._v("Image Splitter & QR Generator For Animal Crossing")]),t._m(0),i("splitter",{on:{splitted:t.splitted}}),t.imgPieces?i("div",t._l(t.imgPieces,(function(t){return i("QRcode",{key:t.key,attrs:{imgPiece:t,"data-aos":"up","data-aos-offset":"50","data-aos-delay":"10","data-aos-duration":"500"}})})),1):t._e()],1)])},a=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"git-ref"},[i("a",{attrs:{href:"https://github.com/Haoxuan8/ImageSplitter-QR-Generator",target:"_blank"}},[t._v("Github")])])}],r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"image-selector"},[t.img?s("div",{staticClass:"img-in"},[s("input",{staticClass:"file-input-bg",attrs:{type:"file",title:""},on:{change:t.inputImg}}),s("img",{ref:"imgShow",staticClass:"img-show",attrs:{src:t.img.src}}),t.splitSize&&t.hPieces<20?s("div",{staticClass:"cropper-splitter",style:{top:t.boxSize.boxTop+"%",left:t.boxSize.boxLeft+"%",height:t.boxSize.boxHeight+"%",width:t.boxSize.boxWidth+"%"}},t._l(t.vPieces,(function(e){return s("div",{key:e,staticClass:"cont-square",style:{top:(e-1)*(1/t.vPieces)*100+"%",width:"100%",height:1/t.vPieces*100+"%"}},t._l(t.hPieces,(function(i){return s("div",{key:i,class:{square:!0,bright:i<t.hPieces,bbottom:e<t.vPieces},style:{height:"100%",width:1/t.hPieces*100+"%"}})})),0)})),0):t._e()]):s("div",{staticClass:"in"},[s("div",{staticClass:"content"},[s("div",{staticClass:"icon"},[s("img",{attrs:{src:i("706e"),alt:""}}),s("input",{staticClass:"file-input",attrs:{type:"file",title:""},on:{change:t.inputImg}})]),t._m(0)])])]),s("div",{staticClass:"splitter-params"},[t._m(1),s("div",{staticClass:"size-input-container"},[s("span",[t._v("px")]),s("input",{directives:[{name:"model",rawName:"v-model.lazy.number",value:t.splitSize,expression:"splitSize",modifiers:{lazy:!0,number:!0}}],staticClass:"size-input",attrs:{type:"number"},domProps:{value:t.splitSize},on:{change:[function(e){t.splitSize=t._n(e.target.value)},t.renderBox],blur:function(e){return t.$forceUpdate()}}})]),s("div",{staticClass:"btn-group"},[s("button",{staticClass:"btn-sub",on:{click:t.decrement}},[t._v("-")]),s("button",{staticClass:"btn-plus",on:{click:t.increment}},[t._v("+")])]),s("div",{staticClass:"split-btn-ct"},[s("button",{staticClass:"split-btn",on:{click:t.split}},[t._v("SPLIT")])])])])},o=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"text"},[i("span",{staticClass:"text-b"},[t._v("Select")]),t._v(" your image file here ")])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("span",{staticClass:"text text-b"},[t._v("split-size")])])}],c={name:"Splitter",data:function(){return{img:!1,splitSize:0,vPieces:0,hPieces:0,boxSize:{boxTop:0,boxLeft:0,boxHeight:0,boxWidth:0,squareSizeH:0,squareSizeW:0}}},methods:{inputImg:function(t){var e=t.target.files||t.dataTransfer.files;if(e.length){var i=new FileReader,s=this;i.onload=function(t){var e=new Image;e.src=t.target.result,e.onload=function(){s.img=e}},i.readAsDataURL(e[0]),this.splitSize=0,this.$emit("splitted",!1)}},updatePieces:function(){if(this.img&&this.splitSize){var t=this.img.naturalHeight,e=this.img.naturalWidth;this.vPieces=Math.floor(t/this.splitSize),this.hPieces=Math.floor(e/this.splitSize)}},renderBox:function(){this.updatePieces();var t=this.$refs.imgShow.width,e=this.$refs.imgShow.height,i=this.img.naturalWidth/t,s=this.splitSize/i,n=this.vPieces*s,a=this.hPieces*s;this.boxSize.boxTop=Math.round((e-n)/2/n*100),this.boxSize.boxLeft=Math.round((t-a)/2/a*100),this.boxSize.boxHeight=Math.round(this.vPieces*s/e*100),this.boxSize.boxWidth=Math.round(this.hPieces*s/t*100),this.boxSize.squareSizeH=Math.round(s/e*100),this.boxSize.squareSizeW=Math.round(s/t*100)},increment:function(){this.splitSize+=10,this.renderBox()},decrement:function(){this.splitSize>=10&&(this.splitSize-=10),this.renderBox()},split:function(){var t=[],e=document.createElement("canvas"),i=e.getContext("2d"),s=this.$refs.imgShow.naturalHeight,n=this.$refs.imgShow.naturalWidth,a=Math.round(s*this.boxSize.boxTop/100),r=Math.round(n*this.boxSize.boxLeft/100);e.width=this.splitSize,e.height=this.splitSize;for(var o=0;o<this.vPieces;o++)for(var c=0;c<this.hPieces;c++)i.drawImage(this.img,-c*this.splitSize-r,-o*this.splitSize-a,n,s),t.push({key:Math.random(),url:e.toDataURL(),title:"tile"+o+"-"+c});this.$emit("splitted",t)}}},l=c,u=i("2877"),h=Object(u["a"])(l,r,o,!1,null,null,null),d=h.exports,f=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"qr-container"},[i("div",{staticClass:"qr-img-container"},[i("p",[t._v("Origin Img")]),i("img",{staticClass:"qr-img",attrs:{src:t.imgPiece.url}})]),i("div",{staticClass:"canvas-container"},[i("p",[t._v("canvas Img")]),i("canvas",{ref:"canvas",attrs:{width:t.edge,height:t.edge}})]),i("div",{staticClass:"code-container"},[i("p",[t._v("QR Code")]),i("div",{ref:"qrcode"})])])},p=[],F=(i("4160"),i("c975"),i("d81d"),i("a9e3"),i("99af"),i("d3b7"),i("5cc6"),i("9a8c"),i("a975"),i("735e"),i("c1ac"),i("d139"),i("3a7b"),i("d5d6"),i("82f8"),i("e91f"),i("60bd"),i("5f96"),i("3280"),i("3fcc"),i("ca91"),i("25a1"),i("cd26"),i("3c5d"),i("2954"),i("649e"),i("219c"),i("170b"),i("b39a"),i("72f7"),i("d4ec")),v=i("bee2"),g=i("262e"),m=i("2caf"),b=i("9072"),C=function(t){Object(g["a"])(i,t);var e=Object(m["a"])(i);function i(){var t;Object(F["a"])(this,i);for(var s=arguments.length,n=new Array(s),a=0;a<s;a++)n[a]=arguments[a];return t=e.call.apply(e,[this].concat(n)),t.initDefaults(),t}return Object(v["a"])(i,[{key:"initDefaults",value:function(){this.setUint16(86,12569),this[103]=204,this[104]=10,this[105]=9}},{key:"setUint16",value:function(t,e){this[t]=255&e,this[t+1]=e>>8}},{key:"setStr",value:function(t,e,i){for(var s=0;s<i/2;s++)s>=e.length?this.setUint16(t+2*s,0,!0):this.setUint16(t+2*s,e.charCodeAt(s),!0)}},{key:"title",set:function(t){this.setStr(0,t,40),this[40]=0,this[41]=0}},{key:"creatorId",set:function(t){this.setUint16(42,t)}},{key:"creator",set:function(t){this.setStr(44,t,20),this[62]=0,this[63]=0}},{key:"townId",set:function(t){this.setUint16(64,t)}},{key:"town",set:function(t){this.setStr(66,t,20),this[84]=0,this[85]=0}},{key:"palettes",set:function(t){for(var e=0;e<t.length;e++)this[88+e]=t[e]}},{key:"pixels",set:function(t){for(var e=108,i=0,s=e;i<t.length;s++)this[s]=(15&t[i])+((15&t[i+1])<<4),i+=2}}]),i}(Object(b["a"])(Uint8Array)),B=["#FFEEFF","#FF99AA","#EE5599","#FF66AA","#FF0066","#BB4477","#CC0055","#990033","#552233","","","","","","","#FFFFFF","#FFBBCC","#FF7777","#DD3210","#FF5544","#FF0000","#CC6666","#BB4444","#BB0000","#882222","","","","","","","#EEEEEE","#DDCDBB","#FFCD66","#DD6622","#FFAA22","#FF6600","#BB8855","#DD4400","#BB4400","#663210","","","","","","","#DDDDDD","#FFEEDD","#FFDDCC","#FFCDAA","#FFBB88","#FFAA88","#DD8866","#BB6644","#995533","#884422","","","","","","","#CCCDCC","#FFCDFF","#EE88FF","#CC66DD","#BB88CC","#CC00FF","#996699","#8800AA","#550077","#330044","","","","","","","#BBBBBB","#FFBBFF","#FF99FF","#DD22BB","#FF55EE","#FF00CC","#885577","#BB0099","#880066","#550044","","","","","","","#AAAAAA","#DDBB99","#CCAA77","#774433","#AA7744","#993200","#773222","#552200","#331000","#221000","","","","","","","#999999","#FFFFCC","#FFFF77","#DDDD22","#FFFF00","#FFDD00","#CCAA00","#999900","#887700","#555500","","","","","","","#888888","#DDBBFF","#BB99EE","#6632CC","#9955FF","#6600FF","#554488","#440099","#220066","#221033","","","","","","","#777777","#BBBBFF","#8899FF","#3332AA","#3355EE","#0000FF","#333288","#0000AA","#101066","#000022","","","","","","","#666666","#99EEBB","#66CD77","#226610","#44AA33","#008833","#557755","#225500","#103222","#002210","","","","","","","#555555","#DDFFBB","#CCFF88","#88AA55","#AADD88","#88FF00","#AABB99","#66BB00","#559900","#336600","","","","","","","#444444","#BBDDFF","#77CDFF","#335599","#6699FF","#1077FF","#4477AA","#224477","#002277","#001044","","","","","","","#333233","#AAFFFF","#55FFFF","#0088BB","#55BBCC","#00CDFF","#4499AA","#006688","#004455","#002233","","","","","","","#222222","#CCFFEE","#AAEEDD","#33CDAA","#55EEBB","#00FFCC","#77AAAA","#00AA99","#008877","#004433","","","","","","","#000000","#AAFFAA","#77FF77","#66DD44","#00FF00","#22DD22","#55BB55","#00BB00","#008800","#224422","","","","","","",""],A=[],D=0;D<256;D++){var x=B[D];if(x.length<7)A.push(null);else{var S=[parseInt(x.substr(1,2),16),parseInt(x.substr(3,2),16),parseInt(x.substr(5,2),16)];A.push(S)}}var y=function(t){for(var e=195075,i=0,s=0;s<256;s++){var n=A[s];if(null!==n){var a=n[0]-t[0],r=n[1]-t[1],o=n[2]-t[2],c=a*a+r*r+o*o;if(c<e){if(!c)return s;e=c,i=s}}}return i},_=i("e0d3"),z=i.n(_),P=i("771e"),w=i.n(P);z.a.stringToBytes=function(t){return t};var E={name:"QRcode",props:{imgPiece:Object,edge:{type:Number,default:32}},data:function(){return{title:this.imgPiece.title,creator:"sun",creatorId:99999,town:"岛",townId:99999}},methods:{renderCanvas:function(){var t=this.$refs.canvas;this.ctx=t.getContext("2d");var e=this,i=new Image;i.onload=function(){e.ctx.drawImage(i,0,0,e.edge,e.edge),e.renderQRCode()},i.src=this.imgPiece.url},readContext:function(){for(var t=[],e=0;e<this.edge;e++)for(var i=0;i<this.edge;i++){var s=this.ctx.getImageData(i,e,1,1).data;s[3]<100?t.push(-1):t.push([s[0],s[1],s[2]])}var n=w()(t,16),a=n.palette();this.palettes=a.map((function(t){return y(t)})),this.pixels=t.map((function(t){return-1==t?15:a.indexOf(n.map(t))}))},renderQRCode:function(){var t=this;this.readContext();var e=new C(620);["title","creator","creatorId","town","townId"].forEach((function(i){e[i]=t[i]})),e.palettes=this.palettes,e.pixels=this.pixels;var i=z()(0,"M");i.addData(e),i.make(),this.$refs.qrcode.innerHTML=i.createImgTag()}},mounted:function(){this.renderCanvas()},updated:function(){this.renderCanvas()}},I=E,k=Object(u["a"])(I,f,p,!1,null,null,null),O=k.exports,j=i("f5af"),M=i.n(j),$={name:"App",created:function(){M.a.init()},components:{Splitter:d,QRcode:O},data:function(){return{imgPieces:!1}},methods:{splitted:function(t){this.imgPieces=t}}},R=$,T=(i("abb8"),Object(u["a"])(R,n,a,!1,null,null,null)),q=T.exports;i("b20f"),i("e829");s["a"].config.productionTip=!1,new s["a"]({render:function(t){return t(q)}}).$mount("#app")},"706e":function(t,e,i){t.exports=i.p+"img/icon_upload.d328d2c6.svg"},abb8:function(t,e,i){"use strict";var s=i("56d1"),n=i.n(s);n.a},b20f:function(t,e,i){}});
//# sourceMappingURL=app.2e12727e.js.map